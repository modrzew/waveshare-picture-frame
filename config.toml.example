# Waveshare Picture Frame Configuration

[mqtt]
host = "localhost"  # MQTT broker hostname or IP
port = 1883         # MQTT broker port
# client_id = "waveshare-frame-01"  # Optional: unique client ID
# username = "mqtt_user"             # Optional: MQTT username
# password = "mqtt_pass"             # Optional: MQTT password
topics = [
    "home/displays/waveshare/command",  # Topic(s) to subscribe to
    # "home/displays/+/command",        # Can use wildcards
]

[display]
model = "7in3e"     # Waveshare model (7in3e, 7in5, 7in5_V2, etc.)
width = 800         # Display width in pixels
height = 480        # Display height in pixels

[logging]
level = "INFO"      # Log level: DEBUG, INFO, WARNING, ERROR
format = "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

[pisugar]
enabled = false                     # Enable battery mode with Pisugar RTC
wake_interval_minutes = 15          # Minutes between wake-ups
use_tcp = true                      # Use TCP instead of Unix socket (avoids permission issues)
tcp_host = "127.0.0.1"              # Pisugar TCP host (only if use_tcp = true)
tcp_port = 8423                     # Pisugar TCP port (only if use_tcp = true)
socket_path = "/tmp/pisugar-server.sock"  # Pisugar Unix socket path (only if use_tcp = false)
message_wait_timeout = 30           # Seconds to wait for MQTT messages
shutdown_after_display = true       # Shutdown system after displaying
battery_topic = "home/displays/waveshare/battery"  # MQTT topic for battery status

[preview]
enabled = true                      # Enable preview thumbnail publishing to Home Assistant
topic = "home/displays/waveshare/preview"  # MQTT topic for preview image
width = 320                         # Thumbnail width in pixels (height maintains aspect ratio)
quality = 80                        # JPEG quality (1-100, higher = better quality but larger size)

# Example MQTT message format:
# {
#   "action": "display_image",
#   "data": {
#     "url": "https://example.com/image.jpg",
#     "resize": true,
#     "clear_first": true
#   }
# }